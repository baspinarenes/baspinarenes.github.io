---
title: "Android Development NotlarÄ±m"
date: 1999-21-03
summary: "Android development Ã¶ÄŸrenirken tuttuÄŸum notlar. Bu yazÄ±yÄ± Ã¶ÄŸrendikÃ§e iyileÅŸtireceÄŸim."
---

<CustomImage src="/images/post/android/android-development-notlari/001.png" width={1920} height={1080} fluid />

> **Sorular:**  
> 1- onRestoreInstanceState ne zaman kullanÄ±lÄ±r?

## General

- **Package Name**, her bir uygulamanÄ±n sahip olduÄŸu benzersiz isimdir. Gelenek
olarak organizasyon isminden sonra verilir. Sallamasyon bir Ã¶rnek verecek
olursam: `com.google.youtube`.
- Android Studio'da Ã¶nlerinde ğŸ”§ olan attribute'lar yalnÄ±zca geliÅŸtirme sÄ±rasÄ±nda
Design ekranÄ±nda gÃ¶rÃ¼ntÃ¼lenir. Bir nevi placeholder'dÄ±r. ProgramÄ± emÃ¼latÃ¶rde
Ã§alÄ±ÅŸtÄ±rÄ±rsak gelmediÄŸini gÃ¶rebiliriz.
- Kotlin'de `println` olsa da Android debugging iÃ§in en iyi seÃ§enek `Log` sÄ±nÄ±fÄ±dÄ±r.
Duruma gÃ¶re mesaj tipleri vardÄ±r. Debug ve Verbose mesajlarÄ± release build'e
dahil edilmez.

```kotlin
private const val TAG = "MainActivity"

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main)
    logging()
}

fun logging() {
    Log.e(TAG, "ERROR: a serious error like an app crash")
    Log.w(TAG, "WARN: warns about the potential for serious errors")
    Log.i(TAG, "INFO: reporting technical information, such as an operation succeeding")
    Log.d(TAG, "DEBUG: reporting technical information useful for debugging")
    Log.v(TAG, "VERBOSE: more verbose than DEBUG logs")
}
```

- **dp**, ekran Ã§Ã¶zÃ¼nÃ¼rlÃ¼kleri farklÄ± olan aynÄ± boyuttaki ekranlarda View'larÄ±n
aynÄ± boyutta olmasÄ±nÄ± saÄŸlayan Ã¶zel bir birimdir. Bunun iÃ§in yoÄŸunluÄŸa baÄŸlÄ±
hesaplama yapÄ±lÄ±r. Alttaki resimden fark gÃ¶rÃ¼lebilir. 

<CustomImage
  src="/images/post/android/android-development-notlari/002.png"
  reference="https://blog.mindorks.com/understanding-density-independent-pixel-sp-dp-dip-in-android"
  width={1920}
  height={1080}
  fluid
/>

- **sp**, yazÄ± boyutlarÄ± iÃ§in Ã¶zel bir birimdir. Ekrandaki yazÄ±larÄ± kullanÄ±cÄ±nÄ±n
telefonunda ayarladÄ±ÄŸÄ± yazÄ± boyutuna gÃ¶re boyutlandÄ±rÄ±r.
- Projede kullanÄ±lan resimler **Drawable** olarak geÃ§er ve Resource Manager'dan
eklenir.
- TasarÄ±m iÃ§ine string gÃ¶mÃ¼lmesi tavsiye edilmez. Hepsine hÄ±zlÄ±ca eriÅŸilebilir ve
istediÄŸimizde diÄŸer dillere Ã§evirilebilir bir yapÄ±da tutmak isteriz. Bu sebeple
bir xml oluÅŸturulur (app > res > values > strings.xml). Ve bu deÄŸer Attribute
ekranÄ±nda `@string/login_text` olarak kullanÄ±lÄ±r.

```xml app/res/values/strings.xml
<resources>
    <string name="app_name">Happy Birthday</string>
    <string name="login_text">Login</string>
</resources>
```

- `aapt` tool'u `res/` dizinindeki tÃ¼m kaynaklarÄ± gezerek id'leri `R` isimli
sÄ±nÄ±fta toplar. Uygulamadaki resource'lara id'leriyle eriÅŸebiliriz.

```kotlin
// Kodda kullanÄ±rken
val imageView: ImageView = findViewById(R.id.myimageview)
imageView.setImageResource(R.drawable.myimage)

val title: TextView = findViewById(R.id.title)
title.setText(R.string.title_text)
```
```xml
<!-- XML de kullanÄ±rken -->
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="hello">Hello</string>
    <string name="hi">@string/hello</string>
</resources>
```

## Activity

- KullanÄ±cÄ±larÄ±n uygulamayla etkileÅŸime girmesine izin veren ekranlara **Activity** denir. Ana ekranÄ±n oluÅŸturulduÄŸu Activity genellikle `MainActivity` olarak adlandÄ±rÄ±lÄ±r.

<CustomImage
  src="/images/post/android/android-development-notlari/003.png"
  reference="https://developer.android.com/codelabs/basic-android-kotlin-training-create-dice-roller-app-with-button#3"
  width={760}
  height={â€Š428}â€Š
  fluid
/>

```kotlin
package com.example.appName

import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle

class MainActivity : AppCompatActivity() {
  override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main)
  }
}
```
- Activity'lerin yedi yaÅŸam dÃ¶ngÃ¼sÃ¼ callback'i vardÄ±r:
  <li style={{ listStyleType: "none"}}>
    <CustomImage
      src="/images/post/android/android-development-notlari/004.png"
      reference="https://www.raywenderlich.com/2705552-introduction-to-android-activities-with-kotlin"
      width={639}
      height={â€Š429}â€Š
      fluid
    />
  </li>
  - `onCreate()` â” Activity ilk oluÅŸturulduÄŸunda tetiklenir. Activity Ã¶mrÃ¼
  boyunca yalnÄ±zca bir kez Ã§alÄ±ÅŸmasÄ± gereken kodlarÄ± burda Ã§alÄ±ÅŸtÄ±rÄ±rÄ±z. EkranÄ±n
  dÃ¼zeni burada tanÄ±mlanÄ±r.
    - Parametre olarak Ã¶nceden kaydedilmiÅŸ state'i iÃ§eren `Bundle` tipindeki
  `saveInstanceState` nesnesini alÄ±r. Daha Ã¶nce yoksa deÄŸeri `null` olur.
  - `onStart()` â” Activity kullanÄ±cÄ±ya gÃ¶sterilmeden Ã¶nce tetiklenir.
  Genellikle UI animasyonlarÄ±nÄ± ve ses gibi aksiyonlar baÅŸlatÄ±labilir. ArdÄ±ndan
  **onResume()** Ã§aÄŸrÄ±lÄ±r.
  - `onResume()` â” Activity Ã¶n plana geldiÄŸinde bu metot Ã§aÄŸrÄ±lÄ±r.
  AnimasyonlarÄ± yeniden baÅŸlatmak, UI nesnelerini gÃ¼ncellemek, ses/video
  oynatmaya devam ettirmek gibi aksiyonlar gerÃ§ekleÅŸtirilebilir.
  - `onPause()` â” Activity arka plana geÃ§meden Ã¶nce Ã§aÄŸrÄ±lÄ±r. UI animasyonlarÄ±,
  ses veya kamera burada durdurulur. ArdÄ±ndan Activity Ã¶n plana
  dÃ¶nerse **onResume()**, gizlenirse **onStop()** izler.
  - `onStop()` â” Activity artÄ±k kullanÄ±cÄ± tarafÄ±ndan gÃ¶rÃ¼lmediÄŸinde
  **onPause()**'dan hemen sonra Ã§aÄŸrÄ±lÄ±r. Diske kaydetmek istediÄŸiniz veriler
  varsa iyi bir yerdir. ArdÄ±ndan Activity tekrar Ã¶n plana gelirse **onRestart()**,
  bellekten serbest bÄ±rakÄ±lÄ±yorsa **onDestroy()** Ã§aÄŸrÄ±lÄ±r.
  - `onRestart()` â” Activity durdurulduktan sonra tekrar baÅŸlamadan hemen Ã¶nce
  Ã§aÄŸrÄ±lÄ±r. ArdÄ±ndan **onStart()** Ã§aÄŸrÄ±lÄ±r.
  - `onDestroy()` â” Activity yok edilmeden Ã¶nce OS'un Ã§aÄŸÄ±racaÄŸÄ± son
  callback'tir. **finish()**'i Ã§aÄŸÄ±rarak ya da sistemin hafÄ±zayÄ± boÅŸaltmasÄ±
  gerektiÄŸi zaman tetiklenir.

<CH.Code>
```kotlin onCreate
var gameState: String? = null
var textView: TextView? = null

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.main_activity)

    gameState = savedInstanceState?.getString(GAME_STATE_KEY)
    textView = findViewById(R.id.text_view)
}

override fun onRestoreInstanceState(savedInstanceState: Bundle?) {
    textView.text = savedInstanceState?.getString(TEXT_VIEW_KEY)
}

override fun onSaveInstanceState(outState: Bundle?) {
    outState?.run {
        putString(GAME_STATE_KEY, gameState)
        putString(TEXT_VIEW_KEY, textView.text.toString())
    }
    super.onSaveInstanceState(outState)
}
```
</CH.Code>

- `onSaveInstanceState()` metodu `onStop()`'dan Ã¶nce (`onPause()`'dan Ã¶nce de
olabilir sonra da) mevcut state'i kaydetmek iÃ§in kullanÄ±lÄ±r. Normalde kayÄ±tlÄ±
state varsa `onCreate()`'de restore edilir ancak baÅŸka stateler de geri yÃ¼klemek
istersek `onRestoreInstanceState()` metodu ile Ã¶zelleÅŸtirebiliriz.

```kotlin
var gameState: String? = null
var textView: TextView? = null

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.main_activity)

    gameState = savedInstanceState?.getString(GAME_STATE_KEY)
    textView = findViewById(R.id.text_view)
}

override fun onRestoreInstanceState(savedInstanceState: Bundle?) {
  // uygulama yeniden baÅŸlatÄ±lmadan Ã¶nce state geri yÃ¼klenir.
  textView.text = savedInstanceState?.getString(TEXT_VIEW_KEY)
}

// uygulama duraklatÄ±lmadan Ã¶nce state kaydedilir.
override fun onSaveInstanceState(outState: Bundle?) {
    // bu metodun iÃ§erisindeki tÃ¼m metodlarÄ±n baÅŸÄ±na otomatik olarak
    // outState ekleyerek metodu ilgili nesneden Ã§alÄ±ÅŸtÄ±rÄ±r.
    outState?.run {
        putString(GAME_STATE_KEY, gameState)
        putString(TEXT_VIEW_KEY, textView.text.toString())
    }
    super.onSaveInstanceState(outState)
}
```

- UI state'inin uygulama dÃ¶ndÃ¼rÃ¼ldÃ¼ÄŸÃ¼nde, Ã§oklu pencere moduna geÃ§irme ya da
baÅŸka uygulamara gidip geri gelindiÄŸinde state'inin korunmasÄ±nÄ± bekleriz. Bunun
iÃ§in `ViewModel`, `onSaveInstanceState()` ya da `local storage` kullanabiliriz.
EÄŸer Ã§ok kÃ¼Ã§Ã¼k bir veri deÄŸilse `onSaveInstanceState()`'den kaÃ§Ä±nmalÄ±yÄ±z.
VarsayÄ±lan olarak sistem, her bir View bilgilerini kaydetmek iÃ§in Bundle
instance state kullanÄ±r. Activity yok edilip tekrar oluÅŸturulduÄŸunda dÃ¼zenin
otomatik olarak Ã¶nceki state geri yÃ¼klenir. Ancak kullanÄ±cÄ±nÄ±n Activity'deki
ilerlemesini tutan deÄŸiÅŸkenleri geri yÃ¼klemek istersek manuel yapmalÄ±yÄ±z.

## Views

- KullanÄ±cÄ±nÄ±n ekranda gÃ¶rdÃ¼ÄŸÃ¼ her nesne (metin, resim, buton vs) **View** olarak adlandÄ±rÄ±lÄ±r. Uygulama 
ekranÄ±nda gÃ¶rÃ¼len hemen her ÅŸey bir View'dÄ±r.
- View'larÄ± belirli bir dÃ¼zende tutmak iÃ§in konteynÄ±rlar kullanÄ±lÄ±r. Bunlara **ViewGroup** denir. Ve aslÄ±nda bu da View nesnesinden tÃ¼rer.
- `ConstraintLayout` iÃ§erisindeki View nesnelerini esnek bir ÅŸekilde dÃ¼zenleyebilmemizi saÄŸlar. Bunu iÃ§indeki elemanlarÄ± absolute olan bir dive benzetebiliriz. **Constraint** ise View'Ä±n ÅŸablonda bulunacaÄŸÄ± yeri belirten Ã¼stten/alttan/soldan/saÄŸdan mesafedir. Bu mesafe 0 ayarlanÄ±rsa otomatik olarak hesaplanÄ±r. CSS'teki `margin: auto;` gibi bir mantÄ±k sÃ¶z konusu. 
- View'lar Component Tree'deki sÄ±raya gÃ¶re ekrana Ã§izdirilir.
- Metin gÃ¶stermek iÃ§in `TextView` kullanÄ±lÄ±r.
- Metin dÃ¼zenleme elemanÄ± iÃ§in `EditText` kullanÄ±lÄ±r.
- Resimleri gÃ¶stermek iÃ§in `ImageView` kullanÄ±lÄ±r.
- Kodda bir UI nesnesini bulmak iÃ§in `findViewById(viewId)` fonksiyonu kullanÄ±lÄ±r.

```kotlin
import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.widget.TextView

class MainActivity : AppCompatActivity() {
  override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main)

    val title: TextView = findViewById(R.id.title)
    title.text = "Deneme" // ya da title.setText(R.string.title_text)
  }
}
```
- Kodda bir UI nesnesini bulmak iÃ§in `findViewById(viewId)` fonksiyonu kullanÄ±lÄ±r.

## XML

- Uygulama yapmak iÃ§in designer kullanabilsek de bu sonunda XML'e Ã§evrilir.
  - **androidx** ile baÅŸlayanlar Android Jetpack kÃ¼tÃ¼phanesinin parÃ§asÄ± olduÄŸunu
  belirtir.
  - **xmlns**, XML ad alanÄ± anlamÄ±na gelir ve yanÄ±ndaki keyword ile ilgili
  nitelikler iÃ§in bir ÅŸema tanÄ±mlar. Ã–rneÄŸin, `android:` Android sistemi
  tarafÄ±ndan tanÄ±mlanan nitelikleri iÅŸaretler.
  - Constraint kullanÄ±rken source mevcut view olmak Ã¼zere target hizalandÄ±ÄŸÄ± yer
  olmak Ã¼zere `layout_constraint<Source>_to<Target>Of` ÅŸeklindedir.
  - `android:orientation` dÃ¼zenin dikey veya yatay olarak ayarlanmasÄ±nÄ± saÄŸlar.
  - `android:layout_width="0dp"` ayarlamak constraint'e gÃ¶re geniÅŸliÄŸin
  hesaplanmasÄ±nÄ± sÃ¶yler.

```xml
<androidx.constraintlayout.widget.ConstraintLayout>
    <TextView
        android:text="Hello World!" />
    <Button
        android:text="Calculate" />
</androidx.constraintlayout.widget.ConstraintLayout>
```

## Testing

- **Unit Test**, kod parÃ§alarÄ±nÄ± dÃ¼zgÃ¼n Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin olmak iÃ§in doÄŸrudan test eder. **JUnit** paketi kullanÄ±lÄ±r. EmÃ¼latÃ¶re ihtiyaÃ§ duymaz. Ã–rn: fonksiyona iletilen argÃ¼manlara gÃ¶re doÄŸru Ã§Ä±ktÄ± alÄ±nmasÄ±.

```kotlin
import org.junit.Test
import org.junit.Assert.assertEquals
import org.junit.Assert.assertTrue

class ExampleUnitTest {
  @Test
  fun addition_isCorrect() {
    assertEquals(4, 2 + 2)
  }

  @Test
  fun generates_number() {
    val randomSide = (1..20).random()
    val dice = MainActivity.Dice(randomSide)
    val rollResult = dice.roll()

    assertTrue("The value of rollResult was not between 1 and 6", rollResult in 1..randomSide)
  }
}
```

- **Instrumentation Test**, arayÃ¼z testi iÃ§in kullanÄ±lan terimdir. Ã–rn: KullanÄ±cÄ±nÄ±n login olduktan sonra sepet ekranÄ±na gidip ekli Ã¼rÃ¼nleri onaylamasÄ±nÄ±n test edilmesi.
- src dizininin altÄ±ndaki `test` klasÃ¶rÃ¼ unit test'leri, `androidTest` klasÃ¶rÃ¼ ise instrumentation test'leri barÄ±ndÄ±rÄ±r. 

<TheEnd />

Android geliÅŸtirme Ã¶ÄŸrenirken Ã¶nemli gÃ¶rdÃ¼ÄŸÃ¼m noktalardan kesitleri bir yerde tutmak istedim. YazÄ±yÄ± sÃ¼rekli gÃ¼ncelliyor olacaÄŸÄ±m.

SaÄŸlÄ±cakla kalÄ±n.

## Kaynaklar

- [https://developer.android.com/kotlin/style-guide](https://developer.android.com/kotlin/style-guide)